<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cititorul Meu German</title>
    <style>
        /* Design general */
        body { font-family: -apple-system, sans-serif; padding: 15px; background: #f0f2f5; color: #1c1e21; margin-top: 70px; }
        
        /* Bara de sus pentru traducere */
        #top-bar { 
            position: fixed; top: 0; left: 0; width: 100%; height: 60px; 
            background: #28a745; color: white; display: flex; align-items: center; 
            justify-content: center; font-weight: bold; font-size: 18px; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.2); z-index: 1000; text-align: center;
        }

        .card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 20px; }
        textarea { width: 100%; height: 80px; border: 1px solid #ccc; border-radius: 8px; padding: 10px; box-sizing: border-box; }
        button { background: #007bff; color: white; border: none; padding: 12px; border-radius: 8px; margin-top: 10px; width: 100%; font-weight: bold; cursor: pointer; }
        
        /* Stil pentru cuvinte */
        .word { cursor: pointer; display: inline-block; padding: 2px 4px; border-radius: 4px; transition: 0.2s; }
        
        /* Culoarea verde când cuvântul este activ */
        .active-word { background-color: #28a745 !important; color: white !important; }
    </style>
</head>
<body>

<div id="top-bar">Apasă pe un cuvânt pentru traducere</div>

<div class="card">
    <textarea id="input-text" placeholder="Lipește aici textul în germană..."></textarea>
    <button onclick="incarcaText()">Încarcă textul</button>
</div>

<div class="card">
    <div id="reader-area">Textul va apărea aici...</div>
</div>

<script>
    function incarcaText() {
        const text = document.getElementById('input-text').value;
        const reader = document.getElementById('reader-area');
        // Împărțim textul și creăm elementele pentru fiecare cuvânt
        reader.innerHTML = text.split(/\s+/).map(word => `<span class="word" onclick="tradu(this)">${word}</span>`).join(' ');
    }

    function tradu(element) {
        // Ștergem culoarea verde de la orice alt cuvânt selectat anterior
        document.querySelectorAll('.word').forEach(w => w.classList.remove('active-word'));
        
        // Colorăm cuvântul curent în verde
        element.classList.add('active-word');

        const cuvant = element.innerText.replace(/[.,!?;]/g, '');
        const topBar = document.getElementById('top-bar');
        
        topBar.innerText = "Traducere: " + cuvant + "...";

        // Interogăm serviciul de traducere
        fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=de&tl=ro&dt=t&q=${cuvant}`)
            .then(res => res.json())
            .then(data => {
                const rezultat = data[0][0][0];
                topBar.innerHTML = `<strong>${cuvant}</strong> = ${rezultat}`;
            })
            .catch(() => {
                topBar.innerText = "Eroare la conexiune";
            });
    }
</script>

</body>
</html>
