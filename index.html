<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Germana Expert All-in-One</title>
    <style>
        * { box-sizing: border-box; }
        body { font-family: sans-serif; margin: 0; padding: 10px; background: #f4f4f9; padding-top: 70px; }
        #top-bar { position: fixed; top: 0; left: 0; width: 100%; height: 60px; background: #28a745; color: white; 
                   display: flex; align-items: center; justify-content: center; z-index: 1000; font-weight: bold; padding: 5px; text-align: center; }
        .card { background: white; border-radius: 10px; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; margin-bottom: 10px; }
        .btn-lvl { border: none; padding: 12px; border-radius: 5px; color: white; font-weight: bold; cursor: pointer; font-size: 12px; }
        .a1 { background: #28a745; } .b1 { background: #fd7e14; } .c1 { background: #6f42c1; } 
        .test { background: #ffc107; color: black; } .stories { background: #007bff; }
        
        /* News Styling */
        .news-item { background: #f8f9fa; padding: 10px; margin-bottom: 8px; border-left: 4px solid #007bff; border-radius: 4px; cursor: pointer; font-size: 14px; }
        .news-title { font-weight: bold; display: block; }

        #reader-area { line-height: 1.8; font-size: 19px; color: #333; min-height: 100px; padding: 10px 0; }
        .word { cursor: pointer; padding: 2px; border-radius: 3px; display: inline-block; }
        .word:active { background: #ffeb3b; }
        
        .btn-audio { width: 100%; background: #343a40; color: white; border: none; padding: 12px; border-radius: 5px; margin-top: 10px; font-weight: bold; display: none; }
        .hidden { display: none; }
        .section-label { font-size: 12px; font-weight: bold; color: #777; margin-bottom: 5px; display: block; text-transform: uppercase; }
    </style>
</head>
<body>

<div id="top-bar">ApasÄƒ pe un buton sau o È™tire</div>

<div class="card">
    <span class="section-label">ðŸ“š BibliotecÄƒ & Teste</span>
    <div class="grid">
        <button class="btn-lvl a1" onclick="incarcaText('a1')">Nivel A1</button>
        <button class="btn-lvl b1" onclick="incarcaText('b1')">Nivel B1</button>
        <button class="btn-lvl c1" onclick="incarcaText('c1')">Nivel C1</button>
        <button class="btn-lvl stories" onclick="incarcaText('grimm')">ðŸ“– PoveÈ™ti Lungi</button>
        <button class="btn-lvl test" onclick="pornesteTest()">QUIZ</button>
        <button class="btn-lvl" style="background:#6c757d;" onclick="togglePropriu()">âž• Propriu</button>
    </div>
    
    <div id="manual-input" class="hidden">
        <textarea id="input-text" style="width:100%; height:80px;" placeholder="LipeÈ™te textul tÄƒu lung aici..."></textarea>
        <button onclick="incarcaPropriu()" style="width:100%; margin-top:5px; padding:10px; background:#007bff; color:white; border:none; border-radius:5px;">ÃŽncarcÄƒ</button>
    </div>
</div>

<div class="card">
    <span class="section-label">ðŸ“° È˜tiri Live Germania (Tagesschau)</span>
    <div id="news-feed">Se Ã®ncarcÄƒ È™tirile...</div>
</div>

<div class="card">
    <span class="section-label">ðŸ“– LecturÄƒ ActivÄƒ</span>
    <div id="reader-area">SelecteazÄƒ ceva de mai sus pentru a studia...</div>
    <button id="btn-audio" class="btn-audio" onclick="vorbeste()">ðŸ”Š AscultÄƒ Textul</button>
</div>

<div class="card">
    <span class="section-label">ðŸ““ Vocabular salvat</span>
    <ul id="vocab-list" style="padding:0; list-style:none;"></ul>
</div>

<script>
    const database = {
        'a1': "Mein Tag ist sehr interessant. Ich stehe morgens um sieben Uhr auf. Ich trinke einen Kaffee und esse ein Brot mit Marmelade. Dann gehe ich zur Arbeit.",
        'b1': "Verben mit trennbaren PrÃ¤fixen sind wichtig. Ich bereite meine PrÃ¤sentation vor. Ich lade meine Kollegen ein. Wir fangen pÃ¼nktlich an und hÃ¶ren spÃ¤t auf.",
        'c1': "Die Ã¶konomische Lage erfordert tiefgreifende Strukturreformen. Experten plÃ¤dieren fÃ¼r eine Diversifizierung der ExportmÃ¤rkte, um die AbhÃ¤ngigkeit zu verringern.",
        'grimm': "Es war einmal eine kleine sÃ¼ÃŸe Dirne, die hatte jedermann lieb, der sie nur ansah, am allerliebsten aber ihre GroÃŸmutter, die wusste gar nicht, was sie alles dem Kinde geben sollte. Einmal schenkte sie ihm ein KÃ¤ppchen von rotem Samt, und da es ihm so wohl stand und es nichts anderes mehr tragen wollte, hieÃŸ es nur das RotkÃ¤ppchen..."
    };

    let vocabular = {};
    let textCurent = "";

    // 1. ÃŽncÄƒrcare È˜tiri Live
    async function fetchNews() {
        const res = await fetch("https://api.rss2json.com/v1/api.json?rss_url=https%3A%2F%2Fwww.tagesschau.de%2Fxml%2Frss2%2F");
        const data = await res.json();
        const feed = document.getElementById('news-feed');
        feed.innerHTML = "";
        data.items.slice(0, 3).forEach(item => {
            let div = document.createElement('div');
            div.className = "news-item";
            div.innerHTML = `<span class="news-title">${item.title}</span>`;
            div.onclick = () => afiseaza(item.title + ". " + item.description.replace(/<[^>]*>?/gm, ''));
            feed.appendChild(div);
        });
    }

    // 2. FuncÈ›ii de afiÈ™are
    function incarcaText(key) { afiseaza(database[key]); }
    
    function afiseaza(txt) {
        textCurent = txt;
        document.getElementById('btn-audio').style.display = "block";
        const area = document.getElementById('reader-area');
        area.innerHTML = txt.split(/\s+/).map(w => `<span class="word" onclick="tradu(this)">${w}</span>`).join(' ');
    }

    function tradu(el) {
        let cuvant = el.innerText.replace(/[.,!?;:]/g, '');
        document.getElementById('top-bar').innerText = "Traducere...";
        fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=de&tl=ro&dt=t&q=${cuvant}`)
            .then(r => r.json()).then(data => {
                let trad = data[0][0][0];
                document.getElementById('top-bar').innerHTML = `<b>${cuvant}</b> = ${trad}`;
                if(!vocabular[cuvant]) {
                    vocabular[cuvant] = trad;
                    let li = document.createElement('li');
                    li.style = "background:#eee; padding:5px; margin-top:3px; border-radius:3px; display:flex; justify-content:space-between;";
                    li.innerHTML = `<span>${cuvant}</span> <b>${trad}</b>`;
                    document.getElementById('vocab-list').prepend(li);
                }
            });
    }

    function vorbeste() {
        let ut = new SpeechSynthesisUtterance(textCurent);
        ut.lang = 'de-DE';
        window.speechSynthesis.speak(ut);
    }

    function togglePropriu() { document.getElementById('manual-input').classList.toggle('hidden'); }
    function incarcaPropriu() { afiseaza(document.getElementById('input-text').value); }
    
    function pornesteTest() {
        let keys = Object.keys(vocabular);
        if(keys.length < 1) { alert("SalveazÄƒ cuvinte Ã®ntÃ¢i!"); return; }
        let c = keys[Math.floor(Math.random() * keys.length)];
        let r = prompt(`Cum se traduce: ${c}?`);
        if(r) alert(r.toLowerCase() === vocabular[c].toLowerCase() ? "Corect!" : "Mai Ã®ncearcÄƒ!");
    }

    fetchNews();
</script>
</body>
</html>
 
